# 技术债务评估（初版）

## Top 10 清单
1. `PlayerController.cs` 过大且高耦合（~4500+行）：输入、状态机、动画、网络、物理桥接、UI混杂
2. 手工线程同步（`SimulationThread`）：锁/等待/镜像结构复杂，调试困难与潜在竞态
3. 旧 `Animation` 系统与大量 `Resources.Load`：可维护性与性能风险；建议 `Animator` + `Addressables`/`YooAssets`
4. `Mono.Simd` 使用：与现代工具链（Burst/Mathematics）脱节
5. AI 大量魔法数字与逻辑耦合（`FishAi.cs`）：建议 `ScriptableObject` 参数化/行为树化
6. 全局单例/静态状态（`GameFactory` 等）：难以测试与复用；建议依赖注入/服务定位器
7. 网络层为演示/模拟：若转多人，需要统一事件/实体同步协议与安全校验
8. 渲染与后处理旧组件混杂：需 URP 统一材质与后处理栈，清理过时效果
9. 资源组织分散：`Resources*`/自定义AB混用；需统一打包与远程更新策略
10. 日志/监控与基准测试缺失：定位性能热点与行为回归困难

## 风险与影响
- 并发与镜像同步的复杂性影响稳定性与可扩展性
- 维护成本高的“上帝类”阻碍新特性快速迭代
- 旧技术栈在移动端的性能与包体难以优化

## 修复建议（摘要）
- 阶段性迁移到 Job System + Burst；封装动作队列与线程安全层
- 拆分玩家控制器为输入/状态机/动画/物理桥接/UI路由模块
- 导入 URP 与 Addressables/YooAssets；清理旧后处理与资源加载
- 将 AI 参数域与模板转为 `ScriptableObject`；引入可视化行为树编辑
- 构建自动化测试与性能基准（PlayMode/Editor），覆盖物理/AI/循环热点2cfile:///e:/DocsHDD/fishingplanet2022/Docs/%E6%8A%80%E6%9C%AF%E5%80%BA%E5%8A%A1%E8%AF%84%E4%BC%B0.md